---
tags: [数学, 解题, 积分方程]
date: 2026-02-19
---

![[Pasted image 20260219211906.png]]

---

**📝 题目**

设 $f(x)$ 是连续函数，且 $f(x) = \cos x - \displaystyle\int_0^x (x-t)f(t)\,dt$，求 $f(x)$。

**💡 解题思路**

这是一个含有 $\int_0^x (x-t)f(t)\,dt$ 形式的**积分方程**。关键技巧：对等式两边**逐次求导**，将积分方程转化为常微分方程（ODE），再利用初始条件求解。

**📐 详细步骤**

**第一步：拆分积分**

将 $(x-t)$ 展开，把积分拆成两部分：

$$\int_0^x (x-t)f(t)\,dt = x\int_0^x f(t)\,dt - \int_0^x t\,f(t)\,dt$$

因此原式变为：

$$f(x) = \cos x - x\int_0^x f(t)\,dt + \int_0^x t\,f(t)\,dt$$

**第二步：第一次求导**

对等式两边关于 $x$ 求导。利用莱布尼茨公式，注意 $x\int_0^x f(t)\,dt$ 需要用乘法求导法则：

$$\frac{d}{dx}\left[x\int_0^x f(t)\,dt\right] = \int_0^x f(t)\,dt + x\,f(x)$$

$$\frac{d}{dx}\left[\int_0^x t\,f(t)\,dt\right] = x\,f(x)$$

因此：

$$f'(x) = -\sin x - \int_0^x f(t)\,dt - x\,f(x) + x\,f(x) = -\sin x - \int_0^x f(t)\,dt$$

即：

$$f'(x) = -\sin x - \int_0^x f(t)\,dt$$

**第三步：第二次求导**

再对上式求导：

$$f''(x) = -\cos x - f(x)$$

整理得到二阶常系数 ODE：

$$\boxed{f''(x) + f(x) = -\cos x}$$

**第四步：求齐次通解**

对应齐次方程 $f''(x) + f(x) = 0$ 的特征方程为 $r^2 + 1 = 0$，特征根 $r = \pm i$，齐次通解：

$$f_h(x) = C_1 \cos x + C_2 \sin x$$

**第五步：求特解**

右端 $-\cos x$ 本身是齐次解的一部分（$\cos x$ 对应特征根 $r = i$），属于**共振**情形，需乘以 $x$ 来设特解：

$$f_p(x) = x(A\cos x + B\sin x)$$

求二阶导：

$$\begin{aligned}
f_p'(x) &= (A\cos x + B\sin x) + x(-A\sin x + B\cos x) \\
f_p''(x) &= -2A\sin x + 2B\cos x + x(-A\cos x - B\sin x)
\end{aligned}$$

代入 $f_p'' + f_p$：

$$\begin{aligned}
f_p'' + f_p &= -2A\sin x + 2B\cos x + x(-A\cos x - B\sin x) + x(A\cos x + B\sin x) \\
&= -2A\sin x + 2B\cos x
\end{aligned}$$

令其等于 $-\cos x$：

$$\begin{cases} -2A = 0 \\ 2B = -1 \end{cases} \implies A = 0,\quad B = -\dfrac{1}{2}$$

所以特解为：

$$f_p(x) = -\frac{x\sin x}{2}$$

**第六步：确定常数（利用初始条件）**

通解为：

$$f(x) = C_1\cos x + C_2\sin x - \frac{x\sin x}{2}$$

由原方程令 $x = 0$：

$$f(0) = \cos 0 - 0 = 1 \implies C_1 = 1$$

由第二步的结果令 $x = 0$：

$$f'(0) = -\sin 0 - 0 = 0$$

而 $f'(x) = -C_1\sin x + C_2\cos x - \dfrac{\sin x + x\cos x}{2}$，代入 $x = 0$：

$$f'(0) = C_2 = 0$$

**✅ 最终答案**

$$\boxed{f(x) = \cos x - \frac{x\sin x}{2}}$$

---

## 🤔 疑问辨析：关于特解 $x$ 与 $x^2$ 的判定

**Q：用户的疑问**
> 在第5步求特解时，共振的情况不应该是两种吗？就是二重共振... 阿尔法对应应该是0... 不应该乘X的平方来设特解吗？为什么以X来设特解？

**A：分析与解答**

这里的关键在于分辨**特征根的重数**。

1.  **特征方程的根**：
    齐次方程 $y'' + y = 0$ 的特征方程是 $r^2 + 1 = 0$，解得特征根 $r_{1,2} = \pm i$。
    注意：这里 $i$ 和 $-i$ 都是**单根**（重数 $k=1$），而不是二重根。
    （注：只有像 $(r^2+1)^2=0$ 即 $r^4+2r^2+1=0$ 这样的方程，$i$ 才是二重根。）

2.  **非齐次项对应参数**：
    右端项 $f(x) = -\cos x$。
    对应复数参数为 $\lambda = \alpha + i\beta = 0 + 1i = i$。

3.  **共振判定（$x^k$ 的 $k$ 取值）**：
    我们要看非齐次项的 $\lambda = i$ 是特征方程的**几重根**。
    -   在本题中，$i$ 是特征方程 $r^2+1=0$ 的**单根**。
    -   所以 $k=1$（即发生了一次共振）。

    因此特解形式设为：
    $$y_p = x^1 \cdot e^{0x} (A \cos x + B \sin x) = x(A \cos x + B \sin x)$$
    
    **什么时候才乘 $x^2$？**
    如果微分方程是 $y^{(4)} + 2y'' + y = -\cos x$，其特征方程为 $(r^2+1)^2 = 0$，此时 $r=\pm i$ 是**二重根**。
    这时如果右端项还是 $\cos x$（对应 $\lambda=i$），由于 $\lambda=i$ 是特征方程的二重根，则必须乘 $x^2$。

**结论**：本题中特征根 $\pm i$ 互不相同且只出现一次，属于单根情形，故特解只乘 $x$。

---

## 🤔 深度辨析：为什么“撞上了”不算二重？

**Q：用户的疑问**
> 我感觉弄错了，到底是齐次方程的解与右边特解对应的解相同才算共振，还是...？
> 当齐次方程解由 $\alpha=0, \beta=1$，右边也是 $\alpha=0, \beta=1$，这不就是二重吗？

**A：分析与解答**

这是一个非常经典的误区！一定要区分 **“匹配（Resonance）”** 和 **“重根（Multiplicity）”** 的定义。

**核心结论：**
指数 $k$ （即 $x^k$ 中的 $k$）的定义是：**右端的参数 $\lambda$ 是特征方程的「几重根」。**

这里的计数规则是 **“只查左边，不加右边”**。

### 详细计数演示

我们来数一数 $\lambda = 0 + 1i = i$ 到底出现了几次：

1.  **第一步：看右边（非齐次项）—— 确定“嫌疑人”**
    右边是 $f(x) = \cos x$。
    这告诉我们：**“我们要去查 $\lambda = i$ 这个数。”**
    （注意：右边只负责**提出问题**，不参与**计数**。无论右边写多少个 $\cos x$，这里都不算数。）

2.  **第二步：查左边（特征方程）—— 确定“重数 $k$”**
    齐次方程是 $y'' + y = 0$。
    特征方程是 $r^2 + 1 = 0$。
    因式分解为：$(r - i)(r + i) = 0$。

    现在开始数 $\lambda = i$ 在这里面出现了几次？
    -   它作为根，只出现了 **1次**（因为只有 1 个 $(r-i)$ 因子）。
    -   **所以 $k=1$。**

### 对比：什么时候才是“二重”？

这就好比 **“查户口”**：
-   **右边**是来访者（$\cos x$），拿着身份证（$\lambda=i$）来敲门。
-   **左边**是户主（特征方程）。
-   **$k$** 是户主家户口本上这个名字出现了几次。

**场景一（本题）：单次共振 ($k=1$)**
-   户主家：$r^2+1=0$ $\rightarrow$ 有一个 $i$。
-   来访者：$i$。
-   结果：查到了 **1** 个。所以 $k=1$。特解乘 $x$。
    *(虽然来访者也有 $i$，但我们只数户口本上的)*

**场景二：无共振 ($k=0$)**
-   户主家：$r^2-1=0$ (即 $y''-y=0$) $\rightarrow$ 只有 $1, -1$。没有 $i$。
-   来访者：$i$ （右边是 $\cos x$）。
-   结果：查到了 **0** 个。所以 $k=0$。特解不乘 $x$。

**场景三：二重共振 ($k=2$)**
-   户主家：$(r^2+1)^2=0$ (即 $y^{(4)}+2y''+y=0$)。
    展开是 $(r-i)^2 (r+i)^2 = 0$。
    注意：户口本上有 **2** 个 $i$。
-   来访者：$i$ （右边是 $\cos x$）。
-   结果：查到了 **2** 个！所以 $k=2$。特解乘 $x^2$。

**总结**：
你直觉上的“左边一个 $i$，右边一个 $i$，加起来是两个”，这个逻辑在微分方程里是不对的。
**规则是：右边指定查谁，左边负责出数。** 左边有几个就是几重。

---

## 🎯 举一反三：换个“来访者”试试

**Q：用户的验证**
> 我好像明白了！如果右边是 $e^x \cos x$，那么来访者应该就是 $\lambda = 1+i$，对吗？

**A：完全正确！👏**

你的理解非常到位。我们来完整拆解一下这个新情况：

**1. 识别身份（确定 $\lambda$）**
右端项：$f(x) = e^x \cos x$
-   对应标准型：$e^{\alpha x} \cos(\beta x)$
-   $\alpha = 1$ （指数部分的系数）
-   $\beta = 1$ （三角函数内的系数）
-   **来访者身份**：$\lambda = \alpha + i\beta = \mathbf{1 + i}$

**2. 拿着 $\lambda$ 去查户口（判定 $k$）**
假设左边还是本题的方程 $y'' + y = \dots$
-   **户主家（特征根）**：$r_1 = i, \quad r_2 = -i$

**3. 判定结果**
-   拿着 $\lambda = 1+i$ 去比对 $i$ 和 $-i$。
-   **结果**：完全不一样！一次都没撞上。
-   **结论**：$k=0$ （无共振）。

**4. 写出特解形式**
因为 $k=0$，所以特解不用乘 $x$：
$$y_p = x^0 \cdot e^x (A \cos x + B \sin x) = e^x (A \cos x + B \sin x)$$

---

## 📥 收录到错题本？

- [ ] 收录到错题本 · 微分方程
- [ ] 收录到错题本 · 一元函数积分

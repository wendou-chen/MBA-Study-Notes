# 🎯 考研备考 Obsidian Vault

一套基于 Obsidian + AI Agent 的考研备考系统。集成了自动计划生成、数学解题板、错题管理、间隔复习、薄弱点诊断、闪卡复习等功能，适用于 Claude Code / Codex CLI 驱动的智能学习工作流。

## 功能一览

| 功能 | 触发方式 | 说明 |
|------|----------|------|
| 📅 每日计划生成 | `/plan` 或 cron 自动 | 根据昨日完成率、当前阶段、待复习错题自动生成 |
| 🧮 数学解题板 | 粘贴图片到解题板 | 拍照/截图粘贴，AI 自动识别并解答 |
| 📝 错题记录 | `/错题 <章节名>` | 自动创建错题目录和模板 |
| 🔄 错题间隔复习 | `/复习错题` | 基于间隔重复算法计算今日待复习清单 |
| 🃏 闪卡复习 | `/闪卡` | 从速查表和高频错题自动生成闪卡，SRS 调度 |
| 🔍 薄弱点诊断 | `/诊断` | 跨章节聚合错题，输出严重度排名和建议 |
| 📊 周复盘 | `/周复盘` | 聚合本周数据，生成结构化复盘报告 |
| 🤖 多学科 Agent | 自然语言提问 | 数学/英语/专业课/政治专家自动调度 |
| 📰 论文日报 | `python daily_paper.py` | ArXiv 前沿论文中文摘要自动生成 |

## 快速开始

### 1. 克隆并打开

```bash
git clone https://github.com/your-username/kaoyan-obsidian-vault.git
```

用 [Obsidian](https://obsidian.md/) 打开克隆下来的文件夹作为 Vault。

### 2. 配置 AI 环境

本系统支持两种 AI 驱动方式，任选其一（或同时使用）：

**方式 A：Claude Code（推荐）**

```bash
# 安装 Claude Code CLI
npm install -g @anthropic-ai/claude-code

# 配置 API Key
export ANTHROPIC_API_KEY=your-key

# 在 Vault 目录下启动
cd /path/to/vault
claude
```

**方式 B：Codex CLI**

```bash
# 安装 Codex CLI
npm install -g @openai/codex

# 配置（编辑 ~/.codex/config.toml）
codex

# 或使用 ChatGPT Plus 订阅
codex --profile plus
```

### 3. 配置环境变量

创建 `.env` 文件（已在 `.gitignore` 中排除）：

```
ANTHROPIC_API_KEY=your-claude-api-key
OBSIDIAN_API_KEY=your-obsidian-local-rest-api-key
```

### 4. 安装社区插件（可选）

在 Obsidian 设置 → 社区插件中按需安装：
- **obsidian-git** — 笔记自动同步到 GitHub
- **Excalidraw** — 知识图谱可视化
- **Style Settings** — 主题定制

## 目录结构

```
├── 考研数学/              # 数学一笔记
│   ├── 错题/             # 按章节分类的错题（含图片）
│   ├── 习题集/           # 练习题与解答
│   ├── 解题板.md         # AI 解题板（粘贴图片即用）
│   └── 固定解法速查表.md  # 高频题型速查
├── 考研英语/              # 英语笔记
├── 专业课/                # 信号与系统笔记
├── 考研计划/              # 每日/每周计划与复盘
│   └── 周复盘/           # 自动生成的周复盘报告
├── 论文日报/              # ArXiv 论文中文摘要
├── Excalidraw/            # 知识图谱
├── .claude/
│   ├── agents/           # 8 个专业 Agent 角色定义
│   └── skills/           # 20+ 自动化技能
├── daily_paper.py         # 论文日报脚本
└── start_obsidian.py      # MCP 服务器启动脚本
```

## 核心功能详解

### 📅 每日计划生成

系统根据你的备考阶段、昨日完成率和待复习错题，自动生成当天的学习计划。

```
触发：/plan 或 "生成今日计划"
输出：考研计划/YYYY-MM-DD 周X.md
```

计划文件兼容 kaoyan-countdown 插件，右侧面板实时显示任务清单和完成率。

**备考阶段自动切换**：系统内置 5 个阶段（基础夯实 → 基础收尾 → 强化突破 → 冲刺模考 → 考前收官），每个阶段有不同的科目时间分配比例，到达切换条件时自动调整。

### 🧮 数学解题板

打开 `考研数学/解题板.md`，直接粘贴题目截图，AI 自动：

1. 识别图片中的数学题
2. 分析考点所属章节
3. 给出完整解题步骤（LaTeX 渲染）
4. 标注易错点

支持多种输入模式：
- **图片模式**：粘贴截图/拍照，AI 自动识别
- **文字模式**：直接输入数学题文字描述
- **追问模式**：对当前题目追问"换一种方法"、"为什么这步成立"

### 📝 错题管理

```
触发：/错题 微分方程
```

自动创建标准目录结构：

```
考研数学/错题/微分方程/
├── 微分方程错题.md    # 错题记录文件
└── images/            # 错题截图存放
```

每条错题记录包含：错误次数、错误知识点、详细错误原因。系统会跨章节追踪你的错误模式。

### 🔄 错题间隔复习

```
触发：/复习错题 或 "今天复习什么"
```

基于间隔重复原理，根据每道错题的错误次数和上次复习日期，计算最优复习时间点。复习间隔随正确次数递增：1天 → 3天 → 7天 → 14天 → 30天。

### 🃏 闪卡复习

```
触发：/闪卡 或 "今日闪卡"
```

自动从两个来源生成闪卡：
- **固定解法速查表**：每个题型的触发条件 → 解法步骤
- **高频错题**（错误次数 ≥ 2）：知识点 → 正确做法

使用 Obsidian callout 折叠实现翻卡效果，内置简单盒子 SRS 调度。

### 🔍 薄弱点诊断

```
触发：/诊断 或 "哪里最弱"
```

扫描所有错题文件，按知识点跨章节聚合，计算严重度评分：

```
严重度 = 错误次数总和 × (1 / (1 + 距今天数/30))
```

输出 `考研数学/薄弱点诊断报告.md`，包含：
- 各章节错题总览表
- 高危知识点 TOP 5（含具体行动建议）
- 时间分配调整建议

### 📊 周复盘

```
触发：/周复盘 或 "本周复盘"
```

自动聚合本周数据：
- 每日任务完成率统计
- 按科目分组的学习时间分布
- 本周新增错题数及章节分布
- 高频错误知识点分析

输出到 `考研计划/周复盘/YYYY-WXX 周复盘.md`。

### 🤖 多学科 Agent 系统

内置 8 个专业 Agent，由 Master Agent 统一调度：

| Agent | 触发示例 | 能力 |
|-------|----------|------|
| 数学 Agent | "证明这个级数收敛" | 考纲全覆盖，逐步推导，LaTeX 排版 |
| 英语 Agent | "分析这篇阅读" | 阅读理解、写作批改、词汇讲解 |
| 专业课 Agent | "傅里叶变换的性质" | 信号与系统全部考点 |
| 政治 Agent | "马原唯物辩证法" | 知识点梳理、时政分析 |
| 计划 Agent | "生成明天的计划" | 数据驱动的日程规划 |
| 排版 Agent | "整理这篇笔记" | Obsidian 格式优化 |

直接用自然语言提问，Master Agent 自动识别意图并调度对应专家。

## 自定义与扩展

### 修改备考阶段

编辑 `.scripts/plan_config.json`，调整阶段时间、科目分配比例和切换条件。

### 添加新学科错题

```
/错题 <新章节名>
```

系统自动创建目录结构，之后粘贴错题截图即可开始记录。

### 自定义 Agent

编辑 `.claude/agents/` 下的 Markdown 文件。每个 Agent 文件包含：
- YAML header（角色、版本、描述）
- Background（背景设定）
- Skills（能力列表）
- Rules（行为规则）
- Workflow（工作流程）

### 添加新技能

在 `.claude/skills/` 下创建新目录，编写 `SKILL.md` 定义触发词和工作流。

## 技术栈

- **知识库**：[Obsidian](https://obsidian.md/)（Markdown + 双向链接）
- **AI 后端**：Claude Code / Codex CLI
- **协议**：MCP（Model Context Protocol）
- **公式渲染**：LaTeX（MathJax）
- **版本控制**：Git + obsidian-git 插件
- **可视化**：Excalidraw

## 许可证

MIT

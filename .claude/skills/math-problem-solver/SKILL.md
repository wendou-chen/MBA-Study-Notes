---
name: math-problem-solver
description: 解答数学问题并以 Obsidian 可渲染的公式格式输出。适用于用户提问数学题、求解、计算、证明、推导、公式、方程等数学相关问题时触发。回答直接使用 $...$ 和 $$...$$ 书写公式，而不是代码块。
---

# 数学问题解答 Skill

当用户提出数学相关问题时，按照以下规范进行回答。

## 工作流程

1. **读取题目**：读取 `考研数学/解题板.md`，解析其中的 `![[...]]` 图片嵌入，找到对应图片文件并识别题目内容
2. **解题**：按照下方结构完成解答
3. **写入结果**：将完整解答**覆写**到 `考研数学/解题板.md`（保留原始图片嵌入 + 追加解答内容）

## ⚠️ 核心规则（必须遵守）

1. **绝对禁止**将公式放入 ` ``` ` 或 ` ```latex ` 代码块中
2. **绝对禁止**使用反引号 `` ` `` 包裹任何公式
3. **必须**使用标准 LaTeX 书写公式：行内用 `$...$`，独立行用 `$$...$$`
4. 所有回答使用**中文**
5. 解题过程用**自然语言 + 公式混排**，像手写在纸上一样让人直接看懂

## 输出规则

### 文件输出（主输出）

解题完成后，将完整解答**覆写**到 `考研数学/解题板.md`。该文件由 Obsidian 实时渲染 LaTeX 公式，用户在 Obsidian 中查看最终效果。

文件内容格式：

```
---
tags: [数学, 解题]
date: {{当天日期 YYYY-MM-DD}}
---

（完整解答内容，使用标准 LaTeX 公式）
```

### 终端输出（简要摘要）

终端只输出一句话摘要，格式：

> **✅ 答案**：（最终结果，一句话）
>
> 完整解答已写入 `考研数学/解题板.md`，请在 Obsidian 中查看渲染效果。

### 收录选项（每次解题后追加到解题板末尾）

解题完成、写入 `考研数学/解题板.md` 后，在文件末尾**再追加**以下内容：

    ## 📥 收录到错题本？

    - [ ] 收录到错题本 · <自动推断的最可能章节>
    - [ ] 收录到错题本 · <次选章节>（如有）

章节从以下固定列表中选择：微分方程 / 无穷级数 / 多元函数积分 / 一元函数积分 / 微分学 / 线性代数 / 概率论

根据题目内容自动推断，最多列出 2 个选项。用户在 Obsidian 中勾选后，插件自动收录。

## LaTeX 公式规范

### 行内公式

用 `$...$` 包裹，如：设函数 $f(x) = x^2 + 1$，求 $f'(x)$。

### 独立行公式

用 `$$...$$` 包裹，如：

$$\int_0^\infty e^{-x^2} dx = \frac{\sqrt{\pi}}{2}$$

### 多行对齐推导

使用 `aligned` 环境：

$$\begin{aligned}
f(x) &= (x+1)^2 \\
&= x^2 + 2x + 1
\end{aligned}$$

### 矩阵

使用 `pmatrix`、`bmatrix` 等环境：

$$A = \begin{pmatrix} a_{11} & a_{12} \\ a_{21} & a_{22} \end{pmatrix}$$

### 分段函数

使用 `cases` 环境：

$$f(x) = \begin{cases} x^2, & x \geq 0 \\ -x, & x < 0 \end{cases}$$

## 回答结构

### 标准格式（写入文件的内容）

**📝 题目**（复述或简述题目，可省略）

**💡 解题思路**：简述采用的方法和关键想法。

**📐 详细步骤**

第一步：描述操作
（展示推导过程）

第二步：继续推导
...

**✅ 最终答案**：用加粗或框线突出最终结果。

### 注意事项

- 每一步都要有**文字说明**，不要只列公式
- 关键变量首次出现时要解释含义
- 复杂推导可以拆成小步，每步有过渡语句
- 如果有多种解法，优先给出最直观的

## 完整示例

以下是写入 `考研数学/解题板.md` 的内容示例：

---

**📝 题目**

求不定积分 $\displaystyle\int \frac{x}{\sqrt{1+x^2}} \, dx$。

**💡 解题思路**

注意到被积函数的分子 $x$ 恰好是分母中 $1+x^2$ 求导后的一部分，因此考虑**凑微分法**。

**📐 详细步骤**

**第一步：识别微分关系**

注意到 $d(1+x^2) = 2x \, dx$，即 $x \, dx = \frac{1}{2} d(1+x^2)$。

**第二步：换元**

令 $u = 1 + x^2$，则：

$$\int \frac{x}{\sqrt{1+x^2}} \, dx = \frac{1}{2} \int \frac{du}{\sqrt{u}}$$

**第三步：计算积分**

$$\begin{aligned}
\frac{1}{2} \int u^{-1/2} \, du &= \frac{1}{2} \cdot 2u^{1/2} + C \\
&= \sqrt{u} + C
\end{aligned}$$

**第四步：回代**

将 $u = 1 + x^2$ 代回，得到：

$$\int \frac{x}{\sqrt{1+x^2}} \, dx = \sqrt{1+x^2} + C$$

**✅ 最终答案**

$$\boxed{\int \frac{x}{\sqrt{1+x^2}} \, dx = \sqrt{1+x^2} + C}$$

---
